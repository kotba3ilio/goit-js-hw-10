{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport iziToast from 'izitoast';\n\nconst timer = {\n  intervalId: null,\n  selectedDate: new Date(),\n  refs: {\n    days: document.querySelector('span[data-days]'),\n    hours: document.querySelector('span[data-hours]'),\n    minutes: document.querySelector('span[data-minutes]'),\n    seconds: document.querySelector('span[data-seconds]'),\n    button: document.querySelector('button'),\n    input: document.querySelector('input'),\n  },\n\n  start() {\n    this.intervalId = setInterval(() => {\n      let interval = this.selectedDate - Date.now();\n      if (interval <= 0) {\n        this.stop();\n        return;\n      }\n      const time = this.convertMs(interval);\n      this.setTime(time);\n    }, 1000);\n    this.refs.button.classList.add('disable');\n    this.refs.input.classList.add('disable');\n  },\n  stop() {\n    clearInterval(this.intervalId);\n    this.refs.button.classList.remove('disable');\n    this.refs.input.classList.remove('disable');\n  },\n  convertMs(ms) {\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n\n    const days = Math.floor(ms / day);\n    const hours = Math.floor((ms % day) / hour);\n    const minutes = Math.floor(((ms % day) % hour) / minute);\n    const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n    return {\n      days,\n      hours,\n      minutes,\n      seconds,\n    };\n  },\n  setDate(date) {\n    this.selectedDate = date;\n    let interval = this.selectedDate - Date.now();\n    if (interval <= 0) {\n      iziToast.show({\n        color: '#ffafb4',\n        message: 'Please choose a date in the future',\n      });\n      this.refs.button.classList.add('disable');\n      return;\n    }\n    this.refs.button.classList.remove('disable');\n    const time = this.convertMs(interval);\n    this.setTime(time);\n  },\n  setTime(time) {\n    this.refs.days.textContent = this.pad(time.days);\n    this.refs.hours.textContent = this.pad(time.hours);\n    this.refs.minutes.textContent = this.pad(time.minutes);\n    this.refs.seconds.textContent = this.pad(time.seconds);\n  },\n  pad(value) {\n    return String(value).padStart(2, '0');\n  },\n};\n\nflatpickr('#datetime-picker', {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    timer.setDate(selectedDates[0]);\n  },\n});\n\ndocument.querySelector('button').addEventListener('click', () => {\n  timer.start();\n});\n"],"names":["timer","interval","time","ms","days","hours","minutes","seconds","date","iziToast","value","flatpickr","selectedDates"],"mappings":"8HAGA,MAAMA,EAAQ,CACZ,WAAY,KACZ,aAAc,IAAI,KAClB,KAAM,CACJ,KAAM,SAAS,cAAc,iBAAiB,EAC9C,MAAO,SAAS,cAAc,kBAAkB,EAChD,QAAS,SAAS,cAAc,oBAAoB,EACpD,QAAS,SAAS,cAAc,oBAAoB,EACpD,OAAQ,SAAS,cAAc,QAAQ,EACvC,MAAO,SAAS,cAAc,OAAO,CACtC,EAED,OAAQ,CACN,KAAK,WAAa,YAAY,IAAM,CAClC,IAAIC,EAAW,KAAK,aAAe,KAAK,IAAG,EAC3C,GAAIA,GAAY,EAAG,CACjB,KAAK,KAAI,EACT,MACD,CACD,MAAMC,EAAO,KAAK,UAAUD,CAAQ,EACpC,KAAK,QAAQC,CAAI,CAClB,EAAE,GAAI,EACP,KAAK,KAAK,OAAO,UAAU,IAAI,SAAS,EACxC,KAAK,KAAK,MAAM,UAAU,IAAI,SAAS,CACxC,EACD,MAAO,CACL,cAAc,KAAK,UAAU,EAC7B,KAAK,KAAK,OAAO,UAAU,OAAO,SAAS,EAC3C,KAAK,KAAK,MAAM,UAAU,OAAO,SAAS,CAC3C,EACD,UAAUC,EAAI,CAMZ,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAC1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EACpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EACjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAClE,MAAO,CACL,KAAAC,EACA,MAAAC,EACA,QAAAC,EACA,QAAAC,CACN,CACG,EACD,QAAQC,EAAM,CACZ,KAAK,aAAeA,EACpB,IAAIP,EAAW,KAAK,aAAe,KAAK,IAAG,EAC3C,GAAIA,GAAY,EAAG,CACjBQ,EAAS,KAAK,CACZ,MAAO,UACP,QAAS,oCACjB,CAAO,EACD,KAAK,KAAK,OAAO,UAAU,IAAI,SAAS,EACxC,MACD,CACD,KAAK,KAAK,OAAO,UAAU,OAAO,SAAS,EAC3C,MAAMP,EAAO,KAAK,UAAUD,CAAQ,EACpC,KAAK,QAAQC,CAAI,CAClB,EACD,QAAQA,EAAM,CACZ,KAAK,KAAK,KAAK,YAAc,KAAK,IAAIA,EAAK,IAAI,EAC/C,KAAK,KAAK,MAAM,YAAc,KAAK,IAAIA,EAAK,KAAK,EACjD,KAAK,KAAK,QAAQ,YAAc,KAAK,IAAIA,EAAK,OAAO,EACrD,KAAK,KAAK,QAAQ,YAAc,KAAK,IAAIA,EAAK,OAAO,CACtD,EACD,IAAIQ,EAAO,CACT,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACrC,CACH,EAEAC,EAAU,mBAAoB,CAC5B,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrBZ,EAAM,QAAQY,EAAc,CAAC,CAAC,CAC/B,CACH,CAAC,EAED,SAAS,cAAc,QAAQ,EAAE,iBAAiB,QAAS,IAAM,CAC/DZ,EAAM,MAAK,CACb,CAAC"}